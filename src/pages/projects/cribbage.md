---
title: "Cribbage"
repo: "https://github.com/JulienR1/cribbage"
tags: "Go,WebSocket,TypeScript,HTMX"
layout: "/src/layouts/Project.astro"
---

I love card games.

When my friend taught me how to play Cribbage, I decided that the best way to **learn the rules** was to program my own version of the game.

## Project structure

The project is separated in 3 sections: the game core, the CLI test app and the web server.

The game core runs the game by itself and waits for user inputs when required.
Any user can **hook into the core game events** and respond accordingly when necessary.
This allows for various UIs or situations to be programmed at the same time, eg.: testing and playing the game.

![Cribbage project structure](/projects/cribbage/cribbage-structure.jpg)
_Simplified project structure_

## Game sequence

The game sequence is relatively simple: join a game lobby, play the game as normal.

The game loop in itself is a state machine described by the following states and picture.

1. Shuffle deck
1. Draw player hands _(6 cards each in a 2 player game)_
1. Build crib _(2 cards each in a 2 player game)_
1. Draw starting card
1. Play hands
1. Score player hands
1. Score crib

At _any point_, if a player get 121 points or more, he or she wins.

![Cribbage game loop](/projects/cribbage/cribbage-game-loop.jpg)
_Game loop overview_

## Tech stack

The game and the web server are both made in [Go](https://go.dev/) because I find it easy and fun.<br/>
The frontend UI is generated by [templ](https://templ.guide/) and aims to be serviced by SSR.<br/>
Interactivity is added through [HTMX](https://htmx.org/) for _generic requests_ and through **websockets** (Javascript + [JSDoc](https://jsdoc.app/)) for game related events.

<style>
    img:first-of-type {
        border: none;
    }
</style>
